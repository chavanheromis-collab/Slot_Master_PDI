<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PDI Shell</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  height:100vh;
  background:#0f172a;
  color:#e5e7eb;
  overflow:hidden;
}

/* ================= SIDEBAR ================= */
.sidebar{
  position:fixed;
  top:0;
  left:0;
  width:260px;
  height:100vh;
  background:#020617;
  border-right:1px solid #1e293b;
  transform:translateX(0);
  transition:.25s ease;
  z-index:100;
}

.sidebar.hide{
  transform:translateX(-100%);
}

.sidebar h2{
  padding:20px;
  font-size:1.1rem;
  border-bottom:1px solid #1e293b;
}

/* ================= NAV ================= */
.nav button{
  width:100%;
  padding:14px 20px;
  background:none;
  border:none;
  color:#94a3b8;
  text-align:left;
  font-size:.95rem;
  cursor:pointer;
  transition:.15s;
}

.nav button:hover{
  background:#1e293b;
  color:#e5e7eb;
}

.nav button.active{
  background:#1e40af;
  color:#fff;
  border-left:4px solid #3b82f6;
}

/* ================= TOGGLE ================= */
.toggle{
  position:fixed;
  top:16px;
  left:16px;
  width:42px;
  height:42px;
  background:#2563eb;
  border:none;
  border-radius:8px;
  cursor:pointer;
  z-index:101;
}

.toggle span{
  display:block;
  width:20px;
  height:2px;
  background:#fff;
  margin:5px auto;
}

/* ================= IFRAME ================= */
#pdiFrame{
  position:fixed;
  top:0;
  left:260px;
  width:calc(100% - 260px);
  height:100vh;
  border:none;
  background:#0f172a;
}

/* ================= MOBILE ================= */
@media(max-width:768px){
  .sidebar{
    transform:translateX(-100%);
  }
  .sidebar.show{
    transform:translateX(0);
  }
  #pdiFrame{
    left:0;
    width:100%;
  }
}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar hide" id="sidebar">
  <h2>ðŸš— PDI Dashboard</h2>
  <div class="nav">
    <button class="active" onclick="openPDI('main',this)">Main PDI</button>
    <button onclick="openPDI('front',this)">Front PDI</button>
    <button onclick="openPDI('back',this)">Back PDI</button>
  </div>
</div>

<!-- TOGGLE BUTTON -->
<button class="toggle" onclick="toggleMenu()">
  <span></span><span></span><span></span>
</button>

<!-- CAMERA SAFE IFRAME -->
<iframe
  id="pdiFrame"
  allow="camera; microphone">
</iframe>

<script>
/* ========= CONFIG ========= */
const BASE =
"https://script.google.com/macros/s/AKfycby9IT55uiRPCvCDdL3rOdA9eP5oYN6jPmMQ75dVZOuBGIyx12fIhdj01ID8Q4ZIRgc74w/exec?page=";

const sb = document.getElementById("sidebar");
const frame = document.getElementById("pdiFrame");
const isMobile = window.innerWidth <= 768;

/* ========= SIDEBAR ========= */
function toggleMenu(){
  sb.classList.toggle(isMobile ? "show" : "hide");
}

/* ========= NAVIGATION ========= */
function openPDI(page, btn){

  // Active button
  document.querySelectorAll(".nav button")
    .forEach(b => b.classList.remove("active"));
  btn.classList.add("active");

  // Load camera page SAFELY
  const newUrl = BASE + page;
  if(frame.src !== newUrl){
    frame.src = newUrl;
  }

  // Close sidebar on mobile
  if(isMobile){
    sb.classList.remove("show");
  }
}

/* ========= INIT ========= */
window.onload = () => {
  frame.src = BASE + "main"; // default load
};
</script>

</body>
</html>
